(this["webpackJsonpexposure-app-front"]=this["webpackJsonpexposure-app-front"]||[]).push([[0],{156:function(e,t,a){e.exports=a(184)},184:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),o=a(48),i=a(9),s=a(21),u=a(230),m=a(133),p=a(265),d=a(231),f=a(15),E=a.n(f),g=a(19),b=a(69),v=a.n(b),h=function(e){var t=window.localStorage.getItem(e);return JSON.parse(t)},O=function(e,t){var a=JSON.stringify(t);window.localStorage.setItem(e,a)},j=function(e){window.localStorage.removeItem(e)},x=function(e){var t=h("savedUser").token;return{headers:{Authorization:"Bearer ".concat(t)},params:e}},y=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("/api","/").concat(t),x(a));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(E.a.mark((function e(t,a,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat("/api","/").concat(t),a,x(n));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(E.a.mark((function e(t,a,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api","/").concat(t),a,x(n));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat("/api","/").concat(t),x(a));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(g.a)(E.a.mark((function e(t,a,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("".concat(t,"s/").concat(a),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("plans/".concat(t,"/tasks"),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(g.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("plans/".concat(t,"/comments"),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B={getAll:k,get:N,getAllTasksFromPlan:I,getAllCommentsFromPlan:D,create:function(){var e=Object(g.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("".concat(t,"s"),a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),update:function(){var e=Object(g.a)(E.a.mark((function e(t,a,n){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("".concat(t,"s/").concat(a),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(g.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("".concat(t,"s/").concat(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},P={login:function(){var e=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R="hr",z="supervisor",L="employee",T=Object(n.createContext)(),F=function(){return Object(n.useContext)(T)},W=Object(n.createContext)(),M=function(){return Object(n.useContext)(W)},A=a(135),V=function(e){var t=e.children,a=e.roles,n=Object(A.a)(e,["children","roles"]),c=F(),l=Object(s.h)();return r.a.createElement(s.b,n,c?a&&!a.includes(c.role)?r.a.createElement(s.a,{to:"/"}):t:r.a.createElement(s.a,{to:{pathname:"/login",state:{from:l}}}))},H=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],l=M(),o=F();return Object(n.useEffect)((function(){o&&o.role===L?l.getAll("plans").then((function(e){var t=Object(i.a)(e.plans,1)[0];return c(t.id)})):c("all")}),[l,o]),o?o.role===L&&null!==a?r.a.createElement(s.a,{to:"/plans/".concat(a)}):"all"===a?r.a.createElement(s.a,{to:"/plans/"}):r.a.createElement("div",null):r.a.createElement(s.a,{to:"/login"})},U=a(232),q=a(138),J=a(273),G=a(239),K=a(276),Q=a(272),X=function(e,t){var a=new CustomEvent("notification",{detail:{type:e,message:t}});document.dispatchEvent(a)},Y=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({}),o=Object(i.a)(l,2),s=o[0],u=o[1];Object(n.useEffect)((function(){var e=function(e){var t=e.detail;u(t),c(!0)};return document.addEventListener("notification",e),function(){document.removeEventListener("notification",e)}}),[]);var m=function(){c(!1)};return r.a.createElement(K.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,onClose:m,autoHideDuration:6e3},r.a.createElement(Q.a,{elevation:2,onClose:m,severity:s.type},s.message))},Z=Object(u.a)((function(e){return{title:{textAlign:"center",fontWeight:600},container:{height:"100vh",display:"flex",alignItems:"center"}}})),$=function(e){var t=e.login,a=Z(),c=a.title,l=a.container,o=Object(n.useState)(""),s=Object(i.a)(o,2),u=s[0],m=s[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),b=f[0],v=f[1],h=Object(n.useState)(!1),O=Object(i.a)(h,2),j=O[0],x=O[1],y=Object(n.useState)(""),w=Object(i.a)(y,2),S=w[0],C=w[1],k=function(){var e=Object(g.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,t(u,b);case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),X("error","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435"),x(!0),C("\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c");case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,{className:l,maxWidth:"xs"},r.a.createElement("form",{onSubmit:k},r.a.createElement(U.a,{container:!0,justify:"flex-end",alignItems:"center",spacing:2},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(q.a,{className:c,variant:"h4",gutterBottom:!0},"Exposure App")),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(J.a,{error:j,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",variant:"outlined",value:u,onChange:function(e){var t=e.target;x(!1),C(""),m(t.value)},required:!0,fullWidth:!0})),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(J.a,{helperText:S,error:j,label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",value:b,onChange:function(e){var t=e.target;x(!1),C(""),v(t.value)},variant:"outlined",autoComplete:"current-password",required:!0,fullWidth:!0})),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(G.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement(Y,null))},_=function(e){var t=e.setUser,a=e.loginService,n=Object(s.g)(),c=(Object(s.h)().state||{from:"/"}).from,l=function(){var e=Object(g.a)(E.a.mark((function e(r,l){var o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.login({username:r,password:l});case 2:o=e.sent,O("savedUser",o),t(o),n.replace(c);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement($,{login:l})},ee=a(267),te=a(126),ae=a.n(te),ne=a(270),re=a(240),ce=a(241),le=a(122),oe=a.n(le),ie=a(121),se=a.n(ie),ue=Object(u.a)((function(e){return{btnText:{marginLeft:e.spacing(1)},sendFab:{margin:e.spacing(1),textTransform:"none",backgroundColor:e.palette.common.white,color:e.palette.primary.main,transition:"all .09s"}}})),me=function(e){var t=e.type,a=e.handler,n=e.text,c=e.innerIcon,l=ue(),o=Object(re.a)(),i="forward"===t?r.a.createElement(se.a,null):r.a.createElement(oe.a,null),s=o?"round":"extended";return r.a.createElement(ce.a,{onClick:a,className:l.sendFab,variant:s},void 0!==t?i:c,o?null:r.a.createElement(ee.a,{className:l.btnText},n))},pe=a(246),de=a(247),fe=a(103),Ee=a(248),ge=a(249),be=a(250),ve=a(251),he=a(252),Oe=a(188),je=a(95),xe=a.n(je),ye=function(e){switch(e){case 0:e="\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u043c";break;case 1:e="\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u043c";break;case 2:e="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435";break;case 3:e="\u041e\u0446\u0435\u043d\u043a\u0430 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u043c";break;default:e="\u041e\u0446\u0435\u043d\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}return e},we=function(e){return e.split(/\s+/).map((function(e,t){return t?e.substring(0,1).toUpperCase()+".":e})).join(" ")},Se=function(e){return new Date(e).toLocaleDateString()},Ce=function(e){return{employee:"\u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a",supervisor:"\u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c",hr:"\u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u043a\u0430\u0434\u0440\u043e\u0432\u043e\u0439 \u0441\u043b\u0443\u0436\u0431\u044b"}[e]},ke=function(e){return e[0].toUpperCase()+e.slice(1)},Ne=a(123),Ie=a(124),De=a(136),Be=a(134),Pe=a(242),Re=Object(u.a)((function(e){return{header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(1)},button:{backgroundColor:e.palette.common.white,color:e.palette.primary.main},icon:{marginRight:e.spacing(1)},errorBoundary:{padding:e.spacing(1),display:"flex",flexDirection:"column",alignItems:"center"},errorText:{color:"#c23934"}}}));function ze(){var e=Re();return r.a.createElement(ee.a,{className:e.errorBoundary},r.a.createElement(q.a,{variant:"h5",gutterBottom:!0,className:e.errorText},"\u0423\u043f\u0441, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0441:"),r.a.createElement(q.a,{variant:"body2",className:e.errorText},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0434\u0430\u0439\u0442\u0435 ",r.a.createElement(Pe.a,{href:"mailto:help@greenatom.ru",underline:"always",className:e.errorText},"\u043d\u0430\u043c")," \u0437\u043d\u0430\u0442\u044c \u043e\u0431 \u044d\u0442\u043e\u043c."))}var Le=function(e){Object(De.a)(a,e);var t=Object(Be.a)(a);function a(){var e;Object(Ne.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(Ie.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(ze,null):this.props.children}}]),a}(r.a.Component),Te=a(277),Fe=a(243),We=a(244),Me=a(245),Ae=function(e){var t=e.isOpen,a=e.setIsOpen,n=e.message,c=e.action,l=e.deletedId,o=e.buttonText,i=function(){return a(!1)};return r.a.createElement(Te.a,{open:t,onClose:i},r.a.createElement(Fe.a,null,r.a.createElement(We.a,null,n)),r.a.createElement(Me.a,null,r.a.createElement(G.a,{onClick:i,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(G.a,{onClick:function(){return(e=l)?c(e):c(),void a(!1);var e},color:"primary"},o||"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},Ve=Object(u.a)((function(e){return{root:{margin:"auto"},highlightedText:{color:"#a6ce39"},deleteColumn:{width:"5%"},planRow:{cursor:"pointer","&:hover":{backgroundColor:"#f9f9f9"}},nameField:{whiteSpace:"nowrap"}}})),He=function(e){var t=e.onPlanClicked,a=e.data,c=e.isHr,l=e.setPlanDeleted,o=function(e){var t=e.name;return Object(pe.a)("(min-width:960px)")||(t=we(t)),r.a.createElement("span",{className:s.nameField},t)},s=Ve(),u=M(),m=Object(n.useState)(!1),p=Object(i.a)(m,2),d=p[0],f=p[1],E=Object(n.useState)(null),g=Object(i.a)(E,2),b=g[0],v=g[1];return r.a.createElement(ee.a,{className:s.root},r.a.createElement(Le,null,r.a.createElement(de.a,{component:fe.a},r.a.createElement(Ee.a,null,r.a.createElement(ge.a,null,r.a.createElement(be.a,null,r.a.createElement(ve.a,null,"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a"),r.a.createElement(ve.a,null,"\u0421\u0442\u0430\u0442\u0443\u0441"),c&&r.a.createElement(ve.a,null,"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c"),r.a.createElement(ve.a,null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"),c&&r.a.createElement(ve.a,{className:s.deleteColumn}))),r.a.createElement(he.a,null,a.map((function(e){return r.a.createElement(be.a,{className:s.planRow,onClick:function(){return t(e.id)},key:e.id},r.a.createElement(ve.a,null,r.a.createElement(o,{name:e.employee.name}),r.a.createElement(q.a,{variant:"subtitle1"},e.employeePosition.name)),r.a.createElement(ve.a,null,ye(e.stage)),c&&r.a.createElement(ve.a,null,r.a.createElement(o,{name:e.supervisor.name})),r.a.createElement(ve.a,null,Se(e.date)),c&&r.a.createElement(ve.a,null,r.a.createElement(Oe.a,{onClick:function(t){return a=e.id,n=t,v(a),f(!0),void n.stopPropagation();var a,n}},r.a.createElement(xe.a,null))))}))))),r.a.createElement(Ae,{isOpen:d,setIsOpen:f,message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043b\u0430\u043d?",deletedId:b,action:function(e){u.remove("plan",e).then((function(e){l(!0)}))}})))},Ue=a(61),qe=a.n(Ue),Je=a(62),Ge=a(63),Ke=a(27),Qe=a(266),Xe=a(268),Ye=function(e){var t=e.variant,a=e.size,c=e.label,l=e.setValue,o=e.path,s=e.role,u=e.attached,m=e.value,p=Object(n.useState)([]),d=Object(i.a)(p,2),f=d[0],E=d[1],g=M();Object(n.useEffect)((function(){g.getAll(o,{role:s,attached:u}).then((function(e){return E(e)}))}),[g,s,o,u]);var b={options:f,getOptionLabel:function(e){return e.name}};return r.a.createElement(Xe.a,Object.assign({},b,{value:m,getOptionSelected:function(e,t){return e.id===t.id},disableClearable:!0,onChange:function(e,t){return l(t,s)},renderInput:function(e){return r.a.createElement(J.a,Object.assign({},e,{label:c,variant:t,size:a,required:!0}))}}))},Ze=function(e){var t=e.onCreation,a=e.toggleCreationMode,c=e.plans,l=e.setPlans,o=e.pageCount,s=e.setPageCount,u=e.currentPage,m=e.limit,p=F(),d=(new Date).getMonth(),f=M(),E=Object(n.useState)(null),g=Object(i.a)(E,2),b=g[0],v=g[1],h=Object(n.useState)(null),O=Object(i.a)(h,2),j=O[0],x=O[1],y=Object(n.useState)(null),w=Object(i.a)(y,2),S=w[0],C=w[1],k=Object(n.useState)(new Date),N=Object(i.a)(k,2),I=N[0],D=N[1],B=Object(n.useState)((new Date).setMonth(d+3)),P=Object(i.a)(B,2),R=P[0],T=P[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te.a,{open:t,onClose:a},r.a.createElement(ee.a,{p:"1.5rem",maxWidth:400},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={employeePosition:j.id,employee:b.id,supervisor:S.id,hr:p.id,stage:0,adaptationStart:I,adaptationEnd:R,completed:"false",rate:"A",tasks:[]};f.create("plan",t).then((function(e){u===o&&(c.length===m?s(o+1):l(c.concat(e))),v(null),C(null),x(null),D(new Date),T(new Date),a(),X("success","\u041f\u043b\u0430\u043d \u0431\u044b\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d.")})).catch((function(e){X("error","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043f\u043b\u0430\u043d\u0430.")}))}},r.a.createElement(U.a,{container:!0,spacing:2,justify:"flex-end"},r.a.createElement(U.a,{item:!0,xs:12,container:!0,justify:"space-between"},r.a.createElement(q.a,{variant:"h6"},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430"),r.a.createElement(Oe.a,{size:"small",onClick:a},r.a.createElement(qe.a,null))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(Ye,{label:"\u0424\u0418\u041e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430",variant:"outlined",setValue:v,path:"users",role:L,attached:!1})),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(Ye,{label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",variant:"outlined",setValue:x,path:"positions"})),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(Ye,{label:"\u0424\u0418\u041e \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f",variant:"outlined",setValue:C,path:"users",role:z})),r.a.createElement(Ke.a,{utils:Je.a,locale:Ge.a},r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(Qe.a,{inputVariant:"outlined",disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",label:"\u041d\u0430\u0447\u0430\u043b\u043e \u0430\u0434\u0430\u043f\u0442\u0430\u0446\u0438\u0438",autoOk:!0,fullWidth:!0,required:!0,value:I,onChange:function(e){return D(e)}})),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(Qe.a,{inputVariant:"outlined",disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",label:"\u041a\u043e\u043d\u0435\u0446 \u0430\u0434\u0430\u043f\u0442\u0430\u0446\u0438\u0438",required:!0,autoOk:!0,fullWidth:!0,value:R,onChange:function(e){return T(e)}}))),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(G.a,{variant:"contained",color:"primary",type:"Submit",fullWidth:!0},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))),r.a.createElement(Y,null))},$e=a(253);var _e=function(e,t){return function(a){return"[]"!==JSON.stringify(t)&&t?r.a.createElement(e,Object.assign({data:t},a)):r.a.createElement(U.a,{container:!0,justify:"center"},r.a.createElement($e.a,{size:50}))}},et=Object(u.a)((function(e){return{message:{minHeight:500},fab:{position:"fixed",bottom:e.spacing(3),right:e.spacing(3)}}})),tt=function(e){var t=e.search,a=et(),c=F(),l=R===c.role,o=M(),u=Object(n.useState)([]),m=Object(i.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),g=E[0],b=E[1],v=Object(n.useState)(1),h=Object(i.a)(v,2),O=h[0],j=h[1],x=Object(n.useState)(1),y=Object(i.a)(x,2),w=y[0],S=y[1],C=Object(n.useState)(!1),k=Object(i.a)(C,2),N=k[0],I=k[1],D=Object(n.useState)(!0),B=Object(i.a)(D,2),P=B[0],z=B[1],L=Object(s.g)();Object(n.useEffect)((function(){o.getAll("plans",{page:w,limit:5,search:t}).then((function(e){d(e.plans),j(e.pageCount),I(!1),z(!1)}))}),[w,o,t,N]);var T=function(){return b((function(e){return!e}))},W=_e(He,p);return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{justify:"center",container:!0,spacing:2},r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(q.a,{variant:"h5"},"\u0410\u0434\u0430\u043f\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u043f\u043b\u0430\u043d\u044b"),r.a.createElement(W,{onPlanClicked:function(e){L.push(e)},isHr:l,setPlanDeleted:I})),!P&&r.a.createElement(U.a,{item:!0},r.a.createElement(ne.a,{count:O,page:w,onChange:function(e,t){S(t)}}))),!P&&(p.length?r.a.createElement(Ze,{onCreation:g,toggleCreationMode:T,plans:p,setPlans:d,pageCount:O,setPageCount:j,currentPage:w,limit:5}):r.a.createElement(U.a,{container:!0,justify:"center",alignItems:"center",className:a.message},r.a.createElement(q.a,{variant:"subtitle1"},"\u041f\u043b\u0430\u043d\u043e\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442, \u043d\u043e \u043e\u043d\u0438 \u0441\u043a\u043e\u0440\u043e \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f :)"))),l?r.a.createElement(ee.a,{className:a.fab},r.a.createElement(me,{text:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043b\u0430\u043d",innerIcon:r.a.createElement(ae.a,null),handler:T})):null)},at=a(37),nt=a(31),rt=a(269),ct=a(255);function lt(e){var t=e.classes,a=e.displayPlan,n=e.handleCompleteMarkChange,c=e.handleRateChange,l=new Map([[!0,"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430"],[!1,"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430"],["A","A. \u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"],["B","B. \u0412\u044b\u0441\u043e\u043a\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"],["C","C. \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0439 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"],["D","D. \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0438\u0436\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0433\u043e"],["E","E. \u041d\u0435\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"]]);return a.stage<3?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{item:!0,container:!0,className:t.row},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:t.textEnd},"\u0418\u0442\u043e\u0433\u0438:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},4===a.stage?r.a.createElement(q.a,null,l.get(a.completed)," "):r.a.createElement(rt.a,{SelectDisplayProps:{style:{padding:10.5,paddingRight:39,paddingLeft:14}},variant:"outlined",value:a.completed,onChange:n,className:t.rateSelect},r.a.createElement(ct.a,{value:!1},"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430"),r.a.createElement(ct.a,{value:!0},"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u0430")))),r.a.createElement(U.a,{item:!0,container:!0,className:t.row},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:t.textEnd},"\u041e\u0446\u0435\u043d\u043a\u0430:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},4===a.stage?r.a.createElement(q.a,null,l.get(a.rate)," "):r.a.createElement(rt.a,{SelectDisplayProps:{style:{padding:10.5,paddingRight:39,paddingLeft:14}},variant:"outlined",value:a.rate,onChange:c,className:t.rateSelect},r.a.createElement(ct.a,{value:"A"},"A. \u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"),r.a.createElement(ct.a,{value:"B"},"B. \u0412\u044b\u0441\u043e\u043a\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438"),r.a.createElement(ct.a,{value:"C"},"C. \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u043c\u043e\u0439 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438"),r.a.createElement(ct.a,{value:"D"},"D. \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0438\u0436\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0433\u043e"),r.a.createElement(ct.a,{value:"E"},"E. \u041d\u0435\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438")))))}var ot=a(279),it=a(256),st=a(274),ut=Object(u.a)((function(){return{root:{width:"100%","& .MuiStep-horizontal":{paddingLeft:"0px",paddingRight:"5px"}},stepper:{flexWrap:"wrap"}}}));function mt(e){var t=e.stage,a=ut(),c=r.a.useState(0),l=Object(i.a)(c,2),o=l[0],s=l[1];return Object(n.useEffect)((function(){s(t)}),[t,o]),r.a.createElement("div",{className:a.root},r.a.createElement(ot.a,{className:a.stepper,activeStep:o,alternativeLabel:!0},["\u0417\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435","\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435","\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435","\u041e\u0446\u0435\u043d\u043a\u0430","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e"].map((function(e){return r.a.createElement(it.a,{key:e},r.a.createElement(st.a,null,e))}))))}function pt(e){var t=e.stageRoleObj,a=e.currentRole,n=e.currentStage,r=e.children;return 4===n?null:"hr"===a||t[a].includes(n)?r:null}var dt=a(257),ft=a(97),Et=a.n(ft);function gt(e){var t=e.passChanges,a=e.value,n=e.dateField,c=e.size;return r.a.createElement(Ke.a,{utils:Je.a,locale:Ge.a},r.a.createElement(Qe.a,{inputVariant:"outlined",disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",size:c,autoOk:!0,value:a,onChange:function(e){var a=e.toJSON();t(n,a)}}))}var bt=Object(u.a)((function(e){return{cardContainer:{position:"relative",padding:e.spacing(2)},editIcon:{marginLeft:"auto",marginBottom:e.spacing(1)},row:{minHeight:40+e.spacing(1),alignItems:"center"},textEnd:{marginRight:e.spacing(1),marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},planField:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},bottomCreationDate:{textAlign:"end",marginBottom:e.spacing(1)},rateSelect:{width:"100%",padding:0}}})),vt=function(e){var t=e.data,a=e.setDisplayPlan,c=M(),l=bt(),o=Object(n.useRef)(3),s=F(),u=Object(n.useState)(!1),m=Object(i.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)(t),E=Object(i.a)(f,2),g=E[0],b=E[1],v=Object(n.useState)(t),h=Object(i.a)(v,2),O=h[0],j=h[1],x=function(e,t){b((function(a){return Object(nt.a)(Object(nt.a)({},a),{},Object(at.a)({},e,t))}))},y=function(e,t){x(t,e)},w=function(e,t){x(e,t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Le,null,r.a.createElement(fe.a,{elevation:2,className:l.cardContainer},r.a.createElement(U.a,{container:!0},r.a.createElement(pt,{stageRoleObj:{supervisor:[1],employee:[]},currentRole:s.role,currentStage:g.stage},r.a.createElement(Oe.a,{size:"small",className:l.editIcon,onClick:function(){o.current=p?3:2,b(O),d(!p)}},p?r.a.createElement(qe.a,null):r.a.createElement(Et.a,null)))),r.a.createElement(U.a,{container:!0,direction:"column",spacing:1},r.a.createElement(U.a,{item:!0,container:!0,className:l.row,alignItems:"center"},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:l.textEnd},"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},p?r.a.createElement(Ye,{label:"",size:"small",variant:"outlined",setValue:y,path:"users",role:"employee",attached:"false",value:g.employee}):r.a.createElement(q.a,{className:l.plan},t.employee.name," "))),r.a.createElement(U.a,{item:!0,container:!0,className:l.row},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:l.textEnd},"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},p?r.a.createElement(Ye,{size:"small",variant:"outlined",label:"",setValue:function(e,t){x(t,e)},path:"positions",role:"employeePosition",value:g.employeePosition}):r.a.createElement(q.a,{className:l.planField},g.employeePosition.name," "))),r.a.createElement(U.a,{item:!0,container:!0,className:l.row},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:l.textEnd},"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},p?r.a.createElement(Ye,{label:"",size:"small",variant:"outlined",setValue:y,path:"users",role:"supervisor",value:g.supervisor}):r.a.createElement(q.a,{className:l.planField},g.supervisor.name))),r.a.createElement(U.a,{item:!0,container:!0,className:l.row},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:l.textEnd},"\u041d\u0430\u0447\u0430\u043b\u043e \u0438\u0441\u043f. \u0441\u0440\u043e\u043a\u0430:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},p?r.a.createElement(gt,{size:"small",passChanges:w,dateField:"adaptationStart",value:g.adaptationStart}):r.a.createElement(q.a,{className:l.planField},Se(g.adaptationStart)," "))),r.a.createElement(U.a,{item:!0,container:!0,className:l.row},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:l.textEnd},"\u041a\u043e\u043d\u0435\u0446 \u0438\u0441\u043f. \u0441\u0440\u043e\u043a\u0430:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},p?r.a.createElement(gt,{size:"small",passChanges:w,dateField:"adaptationEnd",value:g.adaptationEnd}):r.a.createElement(q.a,{className:l.planField},Se(g.adaptationEnd)," "))),r.a.createElement(U.a,{item:!0,container:!0,className:l.row},r.a.createElement(U.a,{item:!0,container:!0,xs:4},r.a.createElement(q.a,{className:l.textEnd},"\u0421\u043e\u0437\u0434\u0430\u043d:")),r.a.createElement(U.a,{item:!0,xs:8,sm:7},r.a.createElement(q.a,{className:l.planField},g.hr.name))),s.role!==L&&r.a.createElement(lt,{classes:l,displayPlan:g,handleCompleteMarkChange:function(e){x("completed",e.target.value)},handleRateChange:function(e){x("rate",e.target.value)}})),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(mt,{stage:g.stage})),r.a.createElement(q.a,{color:"textSecondary",variant:"body2",className:l.bottomCreationDate},"\u0421\u043e\u0437\u0434\u0430\u043d ",Se(g.date)),r.a.createElement(dt.a,{in:p,timeout:"auto",unmountOnExit:!0},r.a.createElement(U.a,{xs:12,item:!0,container:!0,justify:"flex-end"},r.a.createElement(G.a,{color:"primary",type:"Submit",onClick:function(){c.update("plan",g.id,Object(nt.a)(Object(nt.a)({},g),{},{employee:g.employee.id,hr:g.hr.id,supervisor:g.supervisor.id,employeePosition:g.employeePosition.id})).then((function(e){X("success","\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b."),o.current=p?3:2,a(e),d(!1),j(e)})).catch((function(){X("error","\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u0435\u0439.")}))}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))))},ht=Object(u.a)((function(e){return{startDate:{marginRight:e.spacing(2)}}}));function Ot(e){var t=e.passChanges,a=e.dateStart,n=e.dateEnd,c=e.dateStartLabel,l=e.dateEndLabel,o=e.size,i=ht(),s=function(e,a){t(a,e)};return r.a.createElement(Ke.a,{utils:Je.a,locale:Ge.a},r.a.createElement(Qe.a,{size:o,className:i.startDate,inputVariant:"outlined",disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",margin:"normal",label:c,autoOk:!0,value:a,fullWidth:!0,onChange:function(e){return s(e,"dateStart")}}),r.a.createElement(Qe.a,{inputVariant:"outlined",size:o,disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",margin:"normal",label:l,autoOk:!0,value:n,fullWidth:!0,onChange:function(e){return s(e,"dateEnd")}}))}var jt=a(280),xt=a(258),yt=a(271),wt=a(259),St=a(127),Ct=a.n(St),kt=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(1)},accordionRoot:{"&.Mui-focused":{backgroundColor:e.palette.common.white}},accordion:{display:"flex",flexDirection:"column",overflow:"hidden","& .arrow-icon":{transform:"rotate(-90deg)",transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},"&.Mui-expanded .arrow-icon":{transform:"rotate(0deg)",transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},taskHeader:{alignItems:"center",display:"flex",whiteSpace:"nowrap"},additionalInfo:{alignItems:"center",display:"flex",whiteSpace:"nowrap",justifyContent:"space-between",marginRight:e.spacing(1)},taskDescription:{minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:e.spacing(2)},heading:{flex:1,minWidth:0,display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginLeft:e.spacing(1)},headingInput:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},calendar:{display:"flex"},deadlines:{minWidth:"100%"},createdDate:{marginLeft:"auto"}}})),Nt=function(e){var t=e.taskObj,a=e.expService,c=e.planStage,l=e.removeTask,o=kt(),s=Object(n.useState)(!1),u=Object(i.a)(s,2),m=u[0],p=u[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),E=f[0],g=f[1],b=Object(n.useState)(!1),v=Object(i.a)(b,2),h=v[0],O=v[1],j=Object(n.useState)(t),x=Object(i.a)(j,2),y=x[0],w=x[1],S=Object(n.useState)(t),C=Object(i.a)(S,2),k=C[0],N=C[1],I=F(),D={checkBox:{supervisor:[1,3],employee:[2]},editBtn:{supervisor:[1],employee:[0]},deleteBtn:{supervisor:[1],employee:[0]}},B=function(e,t){w((function(a){return Object(nt.a)(Object(nt.a)({},a),{},Object(at.a)({},e,t))}))},P=function(e,t){t.persist(),t.stopPropagation(),B(e,t.target.value)};return r.a.createElement("div",{className:o.root},r.a.createElement(Ae,{isOpen:m,setIsOpen:p,message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443?",deletedId:y.id,action:function(e){a.remove("task",e).then((function(){l()})).catch((function(){X("error","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u0434\u0430\u0447\u0438.")}))}}),r.a.createElement(jt.a,{elevation:2,expanded:h},r.a.createElement(xt.a,{classes:{content:o.accordion,root:o.accordionRoot},onClick:function(){O(!h),w(k),g(!1)}},r.a.createElement("div",{className:o.taskHeader},r.a.createElement(ee.a,{color:"text.secondary"},r.a.createElement(Ct.a,{classes:{root:o.taskArrowIcon},className:"arrow-icon"})),E?r.a.createElement(J.a,{multiline:!0,rowsMax:2,variant:"outlined",size:"small",className:o.headingInput,value:y.name,onChange:function(e){return P("name",e)},onClick:function(e){return e.stopPropagation()},fullWidth:!0}):r.a.createElement(q.a,{className:o.heading},y.name),r.a.createElement(pt,{stageRoleObj:D.checkBox,currentRole:I.role,currentStage:c},r.a.createElement(yt.a,{color:"primary",checked:y.completed,onChange:function(e){a.update("task",y.id,Object(nt.a)(Object(nt.a)({},y),{},{completed:e.target.checked})).then((function(e){e.completed?X("success","\u0417\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u0430 \u043a\u0430\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430\u044f."):X("success","\u0417\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u0430 \u043a\u0430\u043a \u043d\u0435\u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u0430\u044f."),B("completed",e.completed)})).catch((function(){X("error","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u0434\u0430\u0447\u0438.")}))},onClick:function(e){return e.stopPropagation()}})),r.a.createElement(pt,{stageRoleObj:D.editBtn,currentRole:I.role,currentStage:c},r.a.createElement(Oe.a,{onClick:function(e){return function(e){e.stopPropagation(),w(k),g(!E),O(!0)}(e)}},E?r.a.createElement(qe.a,null):r.a.createElement(Et.a,null))),r.a.createElement(pt,{stageRoleObj:D.deleteBtn,currentRole:I.role,currentStage:c},r.a.createElement(Oe.a,{onClick:function(e){return t=e,p(!0),void t.stopPropagation();var t}},r.a.createElement(xe.a,null)))),!h&&r.a.createElement(ee.a,{className:o.additionalInfo},r.a.createElement(q.a,{className:o.taskDescription,color:"textSecondary"},y.description),r.a.createElement(q.a,{color:"textSecondary",variant:"body2"},"\u0434\u043e ",Se(y.executionEnd).slice(0,5)))),r.a.createElement(wt.a,null,r.a.createElement(U.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0,xs:12},E?r.a.createElement(J.a,{variant:"outlined",fullWidth:!0,multiline:!0,rows:2,rowsMax:5,value:y.description,onChange:function(e){return P("description",e)}}):r.a.createElement(q.a,{flex:1,color:"textSecondary",gutterBottom:!0},y.description)),E?r.a.createElement(U.a,{className:o.deadlines,item:!0,xs:12},r.a.createElement(ee.a,{className:o.calendar},r.a.createElement(Ot,{passChanges:function(e,t){B(e="dateStart"===e?"executionStart":"executionEnd",t.toJSON())},dateStart:y.executionStart,dateStartLabel:"\u0421",dateEnd:y.executionEnd,dateEndLabel:"\u0414\u043e"}))):null,r.a.createElement(U.a,{item:!0,xs:12,container:!0,justify:"space-between"},E?null:r.a.createElement(U.a,{item:!0,xs:12,sm:9},r.a.createElement(q.a,{color:"textSecondary",variant:"body2"},"\u0421\u0440\u043e\u043a: \u0441 ",Se(y.executionEnd)," \u0434\u043e ",Se(y.executionEnd))),r.a.createElement(U.a,{className:o.createdDate,xs:12,item:!0,sm:3},r.a.createElement(q.a,{color:"textSecondary",variant:"body2"},"\u0421\u043e\u0437\u0434\u0430\u043d\u0430 ",Se(y.date)))),r.a.createElement(dt.a,{in:E},r.a.createElement(U.a,{item:!0,container:!0,justify:"flex-end",xs:12},r.a.createElement(G.a,{color:"primary",type:"Submit",onClick:function(){g(!E),N(y),a.update("task",y.id,y).then((function(){X("success","\u0417\u0430\u0434\u0430\u0447\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430.")})).catch((function(){X("error","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u0434\u0430\u0447\u0438.")}))}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))))},It=a(235),Dt=function(e){var t=e.tasks,a=e.setTasks,c=e.open,l=e.plan,o=e.toggleCreationForm,s=M(),u=Object(n.useState)(""),m=Object(i.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),g=E[0],b=E[1],v=Object(n.useState)(""),h=Object(i.a)(v,2),O=h[0],j=h[1],x=Object(n.useState)(new Date),y=Object(i.a)(x,2),w=y[0],S=y[1],C=Object(n.useState)(new Date(l.adaptationEnd)),k=Object(i.a)(C,2),N=k[0],I=k[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te.a,{open:c,onClose:o},r.a.createElement(ee.a,{p:"2rem"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={name:p,description:O,executionStart:w,executionEnd:N,plan:l.id,completed:g};s.create("task",n).then((function(e){d(""),j(""),S(new Date),I(new Date),a(t.concat(e)),o(),X("success","\u0417\u0430\u0434\u0430\u0447\u0430 \u0431\u044b\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430.")})).catch((function(e){X("error","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u0434\u0430\u0447\u0438.")}))}},r.a.createElement(U.a,{container:!0,spacing:2,justify:"flex-end"},r.a.createElement(U.a,{item:!0,xs:12,container:!0,justify:"space-between"},r.a.createElement(q.a,{variant:"h6"},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"),r.a.createElement(Oe.a,{size:"small",onClick:o},r.a.createElement(qe.a,null))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(J.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",variant:"outlined",value:p,onChange:function(e){return d(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(J.a,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",variant:"outlined",value:O,onChange:function(e){return j(e.target.value)},fullWidth:!0,multiline:!0,rows:4})),r.a.createElement(Ke.a,{utils:Je.a,locale:Ge.a},r.a.createElement(U.a,{item:!0,sm:6,xs:12},r.a.createElement(Qe.a,{disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",label:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",value:w,onChange:function(e){return S(e)},autoOk:!0,fullWidth:!0,required:!0,inputVariant:"outlined"})),r.a.createElement(U.a,{item:!0,sm:6,xs:12},r.a.createElement(Qe.a,{disableToolbar:!0,variant:"inline",format:"dd.MM.yyyy",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",value:N,onChange:function(e){return I(e)},autoOk:!0,inputVariant:"outlined",required:!0,fullWidth:!0}))),r.a.createElement(U.a,{item:!0,xs:12},r.a.createElement(It.a,{variant:"outlined",fullWidth:!0},r.a.createElement(rt.a,{value:g,onChange:function(e){b(e.target.value)}},r.a.createElement(ct.a,{value:!1},"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"),r.a.createElement(ct.a,{value:!0},"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430")))),r.a.createElement(U.a,{item:!0,xs:12,sm:3},r.a.createElement(G.a,{variant:"contained",color:"primary",type:"Submit",fullWidth:!0},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))),r.a.createElement(Y,null))};function Bt(e){var t=e.size;return r.a.createElement(U.a,{container:!0,justify:"center"},r.a.createElement($e.a,{size:t}))}var Pt=Object(u.a)((function(e){return{root:{marginBottom:170},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(1)},button:{backgroundColor:e.palette.common.white,color:e.palette.primary.main},icon:{marginRight:e.spacing(1)},errorBoundary:{padding:e.spacing(1),display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#c23934"},errorText:{color:"white"}}})),Rt=function(e){var t=e.planObj,a=M(),c=Pt(),l=Object(n.useState)(null),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),d=p[0],f=p[1],E=F();Object(n.useEffect)((function(){a.getAllTasksFromPlan(t.id).then((function(e){return u(e)}))}),[t,a]);var g=function(){return f((function(e){return!e}))};return r.a.createElement("div",{className:c.root},r.a.createElement(ee.a,{className:c.header},r.a.createElement(q.a,{variant:"h5"},"\u0417\u0430\u0434\u0430\u0447\u0438"),r.a.createElement(pt,{stageRoleObj:{supervisor:[1],employee:[0]},currentRole:E.role,currentStage:t.stage},r.a.createElement(G.a,{onClick:g,className:c.button},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))),s?s.map((function(e,n){return r.a.createElement(Nt,{key:e.id,expService:a,taskObj:e,planStage:t.stage,removeTask:function(){return e=n,void u((function(t){return t.filter((function(t,a){return a!==e}))}));var e}})})):r.a.createElement(Bt,{size:50}),r.a.createElement(Dt,{tasks:s,setTasks:u,toggleCreationForm:g,open:d,plan:t}))},zt=a(238),Lt=a(128),Tt=a.n(Lt),Ft=a(189),Wt=Object(u.a)((function(e){return{root:{flexDirection:"column",alignItems:"flex-start"},author:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},date:{marginLeft:"auto"}}})),Mt=function(e){var t=e.data,a=t.content,n=t.user,c=t.date,l=Wt();return r.a.createElement(Ft.a,{className:l.root},r.a.createElement(q.a,{className:l.author,variant:"subtitle1"},"".concat(we(n.name),"  \n    (").concat(ke(Ce(n.role)),")")),r.a.createElement(q.a,null,a),r.a.createElement(q.a,{className:l.date,variant:"subtitle1"},Se(c)))},At=Object(u.a)((function(e){return{root:{padding:e.spacing(1)},title:{marginTop:e.spacing(2),marginBottom:e.spacing(1)},commentList:{overflow:"auto",maxHeight:270},commentForm:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},sendBtn:{marginLeft:e.spacing(1)}}})),Vt=function(e){var t=e.planId,a=At(),c=Object(n.useState)(null),l=Object(i.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),p=m[0],d=m[1],f=M();Object(n.useEffect)((function(){f.getAllCommentsFromPlan(t).then((function(e){return s(e)}))}),[f,t]);var b=function(){var e=Object(g.a)(E.a.mark((function e(a){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={content:p,plan:t},e.next=5,f.create("comment",n);case 5:r=e.sent,console.log(r),s((function(e){return e.concat(r)})),d(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),X("error","\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f.");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{className:a.title,variant:"h5"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 ",o?"(".concat(o.length,")"):""),r.a.createElement(fe.a,{className:a.root,elevation:2},o?r.a.createElement(zt.a,{className:a.commentList},o.map((function(e){return r.a.createElement(Mt,{key:e.id,data:e})}))):r.a.createElement(Bt,{size:50}),r.a.createElement("form",{className:a.commentForm,onSubmit:b},r.a.createElement(J.a,{value:p,onChange:function(e){return d(e.target.value)},size:"small",variant:"outlined",fullWidth:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439..."}),r.a.createElement(Oe.a,{type:"submit",className:a.sendBtn},r.a.createElement(Tt.a,{color:"primary"}))),r.a.createElement(Y,null)))},Ht=a(129),Ut=a.n(Ht),qt=Object(u.a)((function(e){return{sendButtonsBox:{display:"flex",flexDirection:"column",alignItems:"flex-end",position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},cardHeader:{display:"flex",alignItems:"center",marginBottom:e.spacing(1),marginLeft:e.spacing(1)}}})),Jt=function(){var e=M(),t=Object(n.useState)(Object(s.i)().id),a=Object(i.a)(t,1)[0],c=Object(n.useState)(null),l=Object(i.a)(c,2),o=l[0],u=l[1],m=F(),p=Object(s.g)(),d=qt(),f=Object(n.useState)(!1),b=Object(i.a)(f,2),v=b[0],h=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),x=j[0],y=j[1];Object(n.useEffect)((function(){e.get("plan",a).then((function(e){return u(e)}))}),[e,a]);var w=function(e,t){var a={0:"\u041d\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",1:"\u041d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435",2:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435",3:"\u041d\u0430 \u043e\u0446\u0435\u043d\u043a\u0443",4:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443"};return"".concat("backward"===t?a[e-1]:a[e+1])},S=function(){var t=Object(g.a)(E.a.mark((function t(){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(nt.a)(Object(nt.a)({},o),{},{employeePosition:o.employeePosition.id,hr:o.hr.id,employee:o.employee.id,supervisor:o.supervisor.id,stage:++o.stage}),t.next=3,e.update("plan",a,n);case 3:r=t.sent,u(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(g.a)(E.a.mark((function t(){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(nt.a)(Object(nt.a)({},o),{},{employeePosition:o.employeePosition.id,hr:o.hr.id,employee:o.employee.id,supervisor:o.supervisor.id,stage:--o.stage}),t.next=3,e.update("plan",a,n);case 3:r=t.sent,u(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=_e(vt,o);return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{container:!0,spacing:2},r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(U.a,{item:!0},r.a.createElement(ee.a,{className:d.cardHeader},r.a.createElement(Oe.a,{size:"small",edge:"end",color:"inherit",onClick:function(){p.replace("/plans/")}},r.a.createElement(Ut.a,null)),r.a.createElement(q.a,{variant:"h5"},"\u0410\u0434\u0430\u043f\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043f\u043b\u0430\u043d")),r.a.createElement(k,{setDisplayPlan:u})),r.a.createElement(U.a,{item:!0},r.a.createElement(Le,null,r.a.createElement(Vt,{planId:a})))),r.a.createElement(U.a,{item:!0,xs:12,sm:6},r.a.createElement(Le,null,o&&r.a.createElement(Rt,{planObj:o})))),o&&r.a.createElement(ee.a,{className:d.sendButtonsBox},function(){var e,t=(e={},Object(at.a)(e,L,[0,0,0,0,0]),Object(at.a)(e,z,[0,1,0,1,0]),Object(at.a)(e,R,[0,1,1,1,1]),e);return Boolean(t[m.role][o.stage])}()?r.a.createElement(me,{type:"backward",handler:function(){return y(!0)},text:w(o.stage,"backward")}):null,function(){var e,t=(e={},Object(at.a)(e,L,[1,0,1,0,0]),Object(at.a)(e,z,[0,1,0,1,0]),Object(at.a)(e,R,[1,1,1,1,0]),e);return Boolean(t[m.role][o.stage])}()?r.a.createElement(me,{type:"forward",handler:function(){return h(!0)},text:w(o.stage,"forward")}):null),r.a.createElement(Ae,{isOpen:v,setIsOpen:h,message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u044d\u0442\u0430\u043f?",action:S,buttonText:"\u0434\u0430"}),r.a.createElement(Ae,{isOpen:x,setIsOpen:y,message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043b\u0430\u043d \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u044d\u0442\u0430\u043f?",action:C,buttonText:"\u0434\u0430"}))},Gt=a(12),Kt=a(263),Qt=a(264),Xt=a(254),Yt=a(275),Zt=a(139),$t=a(236),_t=a(130),ea=a.n(_t),ta=a(132),aa=a.n(ta),na=a(260),ra=a(261),ca=a(262),la=Object(u.a)((function(e){return{root:{width:"auto"},name:{fontWeight:500},logoutBtn:{marginLeft:"auto"}}})),oa=function(e){var t=e.user,a=e.handleLogoutClick,n=la();return r.a.createElement(na.a,{className:n.root},r.a.createElement(ra.a,null,r.a.createElement(q.a,{className:n.name,gutterBottom:!0},t.name),r.a.createElement(q.a,{className:n.role,variant:"subtitle1"},ke(Ce(t.role)))),r.a.createElement(ca.a,null,r.a.createElement(G.a,{className:n.logoutBtn,size:"small",color:"primary",onClick:a},"\u0412\u044b\u0439\u0442\u0438")))},ia=a(131),sa=a.n(ia),ua=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(2)},toolbar:{flexWrap:"wrap"},logo:{marginRight:e.spacing(2)},name:{marginLeft:e.spacing(1)},search:{minWidth:"20%",position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Gt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Gt.c)(e.palette.common.white,.25)},margin:e.spacing(0,2)},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)")},button:{marginLeft:"auto"},appName:{display:"flex",alignItems:"center",textDecoration:"none",color:e.palette.primary.contrastText}}})),ma=function(e){var t=e.children,a=Object(re.a)();return r.a.createElement(Kt.a,{appear:!1,direction:"down",in:!a},t)},pa=function(e){var t=e.setUser,a=e.setSearch,c=ua(),l=F(),u=Object(s.g)(),m=Object(s.j)("/plans/"),p=null;m&&(p=m.isExact);var d=Object(n.useState)(null),f=Object(i.a)(d,2),E=f[0],g=f[1],b=Boolean(E);return r.a.createElement(ma,null,r.a.createElement(Qt.a,{elevation:1,className:c.root,color:"primary",position:"sticky"},r.a.createElement(Xt.a,{className:c.toolbar},r.a.createElement(o.b,{to:"/",className:c.appName},r.a.createElement(Yt.a,{xsDown:!0},r.a.createElement(ea.a,{className:c.logo})),r.a.createElement(Yt.a,{smDown:!0},r.a.createElement(q.a,{variant:"h6"},"Exposure App"))),p&&r.a.createElement("div",{className:c.search},r.a.createElement("div",{className:c.searchIcon},r.a.createElement(sa.a,null)),r.a.createElement(Zt.a,{onChange:function(e){a(e.target.value)},placeholder:"\u041f\u043e\u0438\u0441\u043a",classes:{root:c.inputRoot,input:c.inputInput}})),r.a.createElement(G.a,{onClick:function(e){return g(e.currentTarget)},color:"inherit",className:c.button,startIcon:r.a.createElement(aa.a,null)},r.a.createElement(Yt.a,{xsDown:!0},we(l.name))),r.a.createElement($t.a,{elevation:2,anchorEl:E,open:b,onClose:function(){return g(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(oa,{handleLogoutClick:function(){j("savedUser"),t(null),u.replace("/login")},user:l})))))},da=Object(u.a)({root:{fontFamily:"Roboto",fontSize:18}}),fa=Object(m.a)({palette:{common:{white:"#ffffff"},primary:{main:"#5c6bc0",contrastText:"white"},secondary:{main:"#e63212"}},typography:{subtitle1:{color:"#838383",fontSize:14},h5:{paddingLeft:15,fontWeight:500,lineHeight:2,fontSize:18}}}),Ea=function(){var e=Object(n.useState)(h("savedUser")),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),u=o[0],m=o[1],f=da().root;return r.a.createElement(W.Provider,{value:B},r.a.createElement(Le,null,r.a.createElement(T.Provider,{value:a},r.a.createElement(p.a,{theme:fa},a?r.a.createElement(pa,{setUser:c,setSearch:m}):null,r.a.createElement(d.a,{className:f},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login"},r.a.createElement(_,{setUser:c,loginService:P})),r.a.createElement(V,{exact:!0,path:"/plans/",roles:[R,z]},r.a.createElement(tt,{search:u})),r.a.createElement(V,{path:"/plans/:id"},r.a.createElement(Jt,null)),r.a.createElement(s.b,{path:"/"},r.a.createElement(H,null)),r.a.createElement(s.a,{to:"/"})))))))};l.a.render(r.a.createElement(o.a,null,r.a.createElement(Ea,null)),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.ce948b01.chunk.js.map